# 项目时间表 - 智能植物护理系统

## 6周实施计划

---

## Week 1: 基础设施 + 采访（11/11 - 11/17）

### 目标
- ✅ 搭建项目环境
- ✅ 实现植物物理模拟器
- ✅ 实现基线策略
- 📋 完成6个用户采访

### 任务清单

#### 代码实现
- [x] 创建项目目录结构
- [x] 配置Python环境和依赖
- [x] 实现`physics.py`（植物生长物理模型）
- [x] 实现`plant_env.py`（Gymnasium环境）
- [x] 实现固定时间表基线
- [x] 实现阈值规则基线
- [ ] 单元测试（环境、物理模型）

#### 用户研究
- [ ] 联系6位采访对象
  - [ ] 2名垂直农场运营者
  - [ ] 2名智能家居产品经理
  - [ ] 2名家庭园艺爱好者
- [ ] 完成采访并录音
- [ ] 整理采访笔记

#### 里程碑交付（Week 1 Saturday）
- **Demo视频1**（5分钟）:
  - 项目介绍和问题陈述
  - 采访精华片段（30秒×3）
  - 环境演示（随机策略运行48小时）
  - 基线策略对比结果

**评估指标**:
- 固定时间表: Health=60, Water=10L/月
- 阈值规则: Health=70, Water=8.5L/月

---

## Week 2-3: PPO实现 + GPU训练（11/18 - 12/1）

### 目标
- 实现完整PPO训练流程
- GPU加速训练
- 达到目标性能（Health≥85, Water<6L）

### Week 2任务（11/18 - 11/24）

#### PPO实现
- [ ] 集成Stable-Baselines3
- [ ] 配置PPO超参数
- [ ] 实现向量化环境（4并行）
- [ ] 配置TensorBoard日志
- [ ] 实现Eval和Checkpoint回调

#### 训练
- [ ] 短期训练测试（10K步）
- [ ] 中期训练（500K步，CPU，约2小时）
- [ ] 分析训练曲线
- [ ] 调试奖励函数

#### 里程碑交付（Week 2 Saturday）
- **Demo视频2**:
  - PPO训练过程展示
  - TensorBoard训练曲线
  - 初步结果（可能未收敛）
  - 与基线对比

**预期结果**:
- 500K步: Health=75-80（中等性能）

### Week 3任务（11/25 - 12/1）

#### GPU加速训练
- [ ] 配置CUDA环境
- [ ] 验证GPU加速效果
- [ ] 长期训练（5M步，GPU，约3小时）
- [ ] 超参数调优
  - Learning rate: [1e-4, 3e-4, 1e-3]
  - Entropy coefficient: [0.0, 0.01, 0.05]
  - Clip range: [0.1, 0.2, 0.3]

#### 性能优化
- [ ] 奖励函数权重调优
- [ ] 网络架构实验（[128,128] vs [256,256]）
- [ ] 批量大小实验

#### 里程碑交付（Week 3 Saturday）
- **Demo视频3**:
  - 完整训练结果
  - GPU加速对比（3h vs 24h）
  - PPO vs 基线对比表格
  - 24小时动作时间线可视化

**目标结果**:
- PPO (5M步): Health≥85, Water<6L, Violations<40h

---

## Week 4: 多场景鲁棒性测试（12/2 - 12/8）

### 目标
- 测试PPO在不同场景下的泛化能力
- 实现安全防护机制
- 域随机化训练

### 任务清单

#### 场景测试
- [ ] 实现5个测试场景:
  - Normal（基准）
  - Hot/Dry（高温干燥）
  - Cloudy（阴天低光）
  - Sensor Noise（传感器噪声）
  - Actuator Delay（执行延迟）
- [ ] 每个场景测试10个episodes
- [ ] 收集统计数据（均值±标准差）

#### 域随机化
- [ ] 实现训练时域随机化
  - 温度: [15°C, 35°C]
  - 蒸发率: ×[0.7, 1.3]
  - 光照: ×[0.6, 1.4]
- [ ] 重新训练鲁棒模型（2M步）
- [ ] 对比标准vs鲁棒模型

#### 安全防护
- [ ] 实现过浇水保护（moisture≤1.0）
- [ ] 实现温度保护（>32°C强制关灯）
- [ ] 记录防护触发次数
- [ ] 验证防护有效性

#### 里程碑交付（Week 4 Saturday）
- **Demo视频4**:
  - 5种场景下的性能对比
  - 鲁棒性测试结果表格
  - 安全防护演示（极端场景）
  - 失败案例分析

**预期结果**:
- Normal: Health=87±2
- Hot/Dry: Health=82±3（下降可接受）
- Cloudy: Health=84±3
- 所有场景: Violations<50h

---

## Week 5: 评估与消融实验（12/9 - 12/15）

### 目标
- 严格的性能评估
- 消融研究
- 统计显著性测试

### 任务清单

#### 完整评估
- [ ] 每个策略运行20个episodes（统计显著性）
- [ ] 收集完整指标:
  - 平均健康度
  - 最终健康度
  - 用水量
  - 能耗
  - 约束违规
  - 效率分数
- [ ] 配对t检验（PPO vs 最佳基线）

#### 消融研究
- [ ] **观察消融**:
  - 移除temperature
  - 移除light_level
  - 移除hours_since_water
  - 每个训练500K步
- [ ] **奖励权重消融**:
  - α=0（忽略健康度）
  - β=0（忽略用水）
  - γ=0（忽略能耗）
  - δ=0（忽略违规）
- [ ] **网络架构消融**:
  - [64, 64]
  - [128, 128]
  - [256, 256]
  - [512, 512]

#### 数据分析
- [ ] 生成所有对比图表
- [ ] 撰写结果分析文档
- [ ] 准备演示材料

#### 里程碑交付（Week 5 Saturday）
- **Demo视频5**:
  - 完整评估结果
  - 消融实验结果
  - 统计显著性测试（p-value<0.05）
  - 关键发现和见解

**关键发现示例**:
- "移除temperature导致性能下降15%"
- "增加网络深度到512无显著提升"

---

## Week 6: 最终演示与文档（12/16 - 12/22）

### 目标
- 完善可视化
- 录制最终演示视频
- 准备演讲材料

### 任务清单

#### 可视化优化
- [ ] 生成高质量图表:
  - 对比表格（PNG, 300dpi）
  - 训练曲线（从TensorBoard导出）
  - 24小时动作时间线
  - 场景对比柱状图
  - 消融实验热力图
- [ ] 创建系统架构图
- [ ] 创建算法流程图

#### 演示视频
- [ ] 编写脚本（分镜）
- [ ] 录制素材:
  - 问题介绍（30秒）
  - 采访精华（1分钟）
  - 技术方案（1分钟）
  - 实时演示（1分钟）
  - 结果对比（1分钟）
  - 商业价值（30秒）
- [ ] 视频剪辑（5分钟总时长）
- [ ] 添加字幕和标注

#### 文档完善
- [ ] 更新README（包含最终结果）
- [ ] 撰写技术报告（10页）:
  - Abstract
  - Introduction
  - Related Work
  - Methodology
  - Experiments
  - Results
  - Discussion
  - Conclusion
- [ ] 准备演讲PPT（10-15张）

#### 代码清理
- [ ] 移除调试代码
- [ ] 添加缺失的注释
- [ ] 统一代码风格（black格式化）
- [ ] 编写使用文档

#### 里程碑交付（Week 6 Saturday）
- **最终提交**:
  - 5分钟演示视频
  - 完整代码（GitHub）
  - 技术报告（PDF）
  - 演讲PPT
  - 采访录音文件夹

---

## 每周检查清单

### 每周六必做
- [ ] 录制并上传Demo视频
- [ ] 更新项目进度文档
- [ ] 提交到Coursistant
- [ ] 团队（或导师）会议回顾
- [ ] 规划下周任务

### 每日站会（可选，15分钟）
- 昨天完成了什么？
- 今天计划做什么？
- 遇到什么阻塞？

---

## 风险管理

### 主要风险

| 风险 | 可能性 | 影响 | 缓解措施 |
|-----|--------|------|---------|
| GPU不可用 | 低 | 高 | 使用云GPU (AWS/Colab)或减少训练步数 |
| PPO不收敛 | 中 | 高 | 调整超参数，参考SB3示例，减小复杂度 |
| 采访难约 | 中 | 中 | 提前联系，准备备选人选，降低门槛 |
| 时间不足 | 高 | 高 | 减少可选功能，聚焦核心指标 |
| 环境Bug | 中 | 中 | 编写单元测试，参考Gym源码 |

### 应对策略

**如果PPO性能不达标（Week 3）**:
1. 降低目标（Health≥80 vs ≥85）
2. 简化状态空间（移除不重要特征）
3. 使用预训练策略（迁移学习）

**如果采访进度落后（Week 1）**:
1. 扩大采访范围（在线社区）
2. 使用二手数据（行业报告）
3. 同学/朋友代替（降低质量）

**如果时间严重不足（Week 5）**:
- 放弃: 消融实验、多场景测试
- 保留: 基本PPO、基线对比、演示视频

---

## 时间预算

| 任务类别 | 预计时间 | 实际时间 | 备注 |
|---------|---------|---------|------|
| 环境开发 | 8h | - | |
| 基线实现 | 4h | - | |
| PPO训练 | 12h（开发）+ 3h（训练） | - | |
| 采访 | 12h（联系+采访+整理） | - | |
| 多场景测试 | 8h | - | |
| 评估分析 | 10h | - | |
| 可视化 | 6h | - | |
| 视频制作 | 10h | - | |
| 文档撰写 | 12h | - | |
| **总计** | **~85小时** | - | 平均每周14小时 |

---

## 成功标准

### 必须达到（P0）
- ✅ 6个采访完成并录音
- ✅ PPO训练成功收敛
- ✅ PPO超越基线（Health +15%，Water -40%）
- ✅ GPU加速实现（至少3x提升）
- ✅ 最终演示视频提交

### 应该达到（P1）
- 多场景鲁棒性测试
- 消融实验
- 统计显著性检验
- 高质量可视化

### 最好达到（P2）
- 域随机化训练
- 实时Web演示界面
- 技术博客文章
- GitHub开源（100+ stars）

---

## 参考资料

1. **Stable-Baselines3文档**: https://stable-baselines3.readthedocs.io/
2. **Gymnasium教程**: https://gymnasium.farama.org/
3. **PPO原论文**: Schulman et al., 2017
4. **植物生理学**: Thornley & Johnson, 2000
5. **RL课程**: CS885 (UWaterloo), CS285 (Berkeley)

---

**最后更新**: 2025-11-11  
**负责人**: Kelin Wu  
**导师**: Professor Young H. Cho

